{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../context/AuthContext';import{apiMethods}from'../services/api';import LoadingSpinner from'../components/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{var _user$role,_user$role2;const{user}=useAuth();const[stats,setStats]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// In your client/src/pages/Dashboard.js file, update the useEffect:\nuseEffect(()=>{const fetchDashboardData=async()=>{try{setLoading(true);// If user is admin, fetch user stats\nif((user===null||user===void 0?void 0:user.role)==='admin'){const response=await apiMethods.users.getStats();setStats(response.data.data);}setError(null);}catch(err){console.error('Dashboard error:',err);setError('Failed to load dashboard data');}finally{setLoading(false);}};fetchDashboardData();},[user===null||user===void 0?void 0:user.role]);// Add user?.role as dependency\nif(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{text:\"Loading dashboard...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome back, \",user===null||user===void 0?void 0:user.name,\"!\"]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",user===null||user===void 0?void 0:user.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user===null||user===void 0?void 0:user.email]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Role:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"role-badge \".concat(user===null||user===void 0?void 0:user.role),children:(user===null||user===void 0?void 0:(_user$role=user.role)===null||_user$role===void 0?void 0:_user$role.charAt(0).toUpperCase())+(user===null||user===void 0?void 0:(_user$role2=user.role)===null||_user$role2===void 0?void 0:_user$role2.slice(1))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Member since:\"}),\" \",new Date(user===null||user===void 0?void 0:user.createdAt).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(user!==null&&user!==void 0&&user.isActive?'active':'inactive'),children:user!==null&&user!==void 0&&user.isActive?'Active':'Inactive'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"action-btn\",onClick:()=>window.location.href='/profile',children:[/*#__PURE__*/_jsx(\"span\",{className:\"action-icon\",children:\"\\uD83D\\uDC64\"}),\"Edit Profile\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"action-btn\",onClick:()=>window.location.href='/settings',children:[/*#__PURE__*/_jsx(\"span\",{className:\"action-icon\",children:\"\\u2699\\uFE0F\"}),\"Settings\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"action-btn\",onClick:()=>window.location.href='/help',children:[/*#__PURE__*/_jsx(\"span\",{className:\"action-icon\",children:\"\\u2753\"}),\"Help & Support\"]})]})]}),(user===null||user===void 0?void 0:user.role)==='admin'&&stats&&/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Statistics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-number\",children:stats.totalUsers}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Total Users\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-number\",children:stats.activeUsers}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Active Users\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-number\",children:stats.adminUsers}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Admin Users\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-number\",children:stats.recentUsers}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"New This Month\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recent Activity\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"activity-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"activity-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"activity-icon\",children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"activity-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"activity-title\",children:\"Account Created\"}),/*#__PURE__*/_jsx(\"div\",{className:\"activity-time\",children:new Date(user===null||user===void 0?void 0:user.createdAt).toLocaleDateString()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"activity-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"activity-icon\",children:\"\\uD83D\\uDC4B\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"activity-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"activity-title\",children:\"Last Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"activity-time\",children:user!==null&&user!==void 0&&user.lastLogin?new Date(user.lastLogin).toLocaleDateString():'N/A'})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"System Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"system-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Application:\"}),\" beWanted v1.0.0\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Environment:\"}),\" \",process.env.NODE_ENV||'development']}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Server Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge active\",children:\"Online\"})]})]})]})]})]})});};export default Dashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}